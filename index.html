<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Glomo Earlybird â€“ Curated Basket</title>

  <!-- Bulma -->
  <link rel="stylesheet" href="css/bulma.min.css">

  <style>
    :root{
      --bg:#0b0b0c;
      --panel:#0f0f10;
      --text:#f5f5f7;
      --muted:#b9b9c0;
      --line:rgba(255,255,255,.10);

      /* Logo-inspired accents (cyan â†’ pink â†’ gold) */
      --c1:#00d1ff;
      --c2:#ff4fd8;
      --c3:#ffd166;
    }

    html, body { background: var(--bg); color: var(--text); }
    .glomo-wrap { min-height: 100vh; display:flex; align-items:center; }
    .glomo-card{
      background: rgba(255,255,255,.03);
      border: 1px solid var(--line);
      border-radius: 18px;
      box-shadow: 0 20px 60px rgba(0,0,0,.55);
      overflow: hidden;
    }
    .glomo-card__top{
      padding: 22px 22px 14px;
      border-bottom: 1px solid var(--line);
      background:
        radial-gradient(1200px 200px at 10% 0%, rgba(0,209,255,.16), transparent 60%),
        radial-gradient(1200px 200px at 60% 0%, rgba(255,79,216,.14), transparent 55%),
        radial-gradient(1200px 240px at 95% 0%, rgba(255,209,102,.12), transparent 55%),
        rgba(255,255,255,.02);
    }
    .brand-row { display:flex; align-items:center; gap:12px; }
    .brand-mark{
      width: 40px; height: 40px; border-radius: 12px;
      border: 1px solid var(--line);
      background: linear-gradient(135deg, rgba(0,209,255,.18), rgba(255,79,216,.16), rgba(255,209,102,.14));
      display:grid; place-items:center;
      overflow:hidden;
    }
    .brand-mark img{ width:100%; height:100%; object-fit:cover; display:block; }

    .glomo-card__body{ padding: 20px 22px 22px; }
    .help, .subtitle, .label{ color: var(--muted) !important; }

    /* Inputs */
    .input, .textarea, .select select{
      background: rgba(0,0,0,.35) !important;
      border-color: rgba(255,255,255,.14) !important;
      color: var(--text) !important;
      border-radius: 12px;
    }
    .input::placeholder, .textarea::placeholder { color: rgba(245,245,247,.45); }
    .input:focus, .textarea:focus, .select select:focus{
      box-shadow: 0 0 0 3px rgba(0,209,255,.18) !important;
      border-color: rgba(0,209,255,.55) !important;
    }

    /* Buttons */
    .btn-gradient{
      border: 0;
      color: #0b0b0c !important;
      background: linear-gradient(90deg, var(--c1), var(--c2), var(--c3));
      border-radius: 14px;
      font-weight: 800;
      letter-spacing: .2px;
    }
    .btn-ghost{
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--text) !important;
      border-radius: 14px;
      font-weight: 700;
    }
    .btn-danger-ghost{
      background: rgba(255,79,216,.10);
      border: 1px solid rgba(255,79,216,.35);
      color: var(--text) !important;
      border-radius: 12px;
      font-weight: 700;
    }

    /* Product rows */
    .product-block{
      border: 1px solid var(--line);
      background: rgba(0,0,0,.25);
      border-radius: 16px;
      padding: 14px;
    }
    .product-block__head{
      display:flex; justify-content:space-between; align-items:center;
      margin-bottom: 10px;
    }
    .tag.is-dark{
      background: rgba(255,255,255,.08) !important;
      border: 1px solid rgba(255,255,255,.10);
      color: var(--text) !important;
    }
    .thumb{
      width: 56px; height: 56px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      overflow:hidden;
      display:grid; place-items:center;
      font-size: 12px;
      color: rgba(245,245,247,.55);
    }
    .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }

    .fineprint{
      font-size: 12px;
      color: rgba(245,245,247,.55);
    }
  </style>
</head>

<body>
  <section class="section glomo-wrap">
    <div class="container" style="max-width: 920px;">
      <div class="glomo-card">
        <div class="glomo-card__top">
          <div class="brand-row">
            <div class="brand-mark" title="Glomo">
              <!-- Replace src with your hosted logo path (example: /assets/glomo-square-logo.png) -->
              <img src="glomo-square-logo.png" alt="Glomo logo">
            </div>
            <div>
              <h1 class="title is-4 mb-1" style="color:var(--text);">Earlybird Curated Basket</h1>
              <p class="subtitle is-6 mb-0">
                Tell us what you already use. Weâ€™ll curate a basket you can order &amp; reorder anytime.
              </p>
            </div>
          </div>
        </div>

        <div class="glomo-card__body">
          <form id="earlybirdForm" action="#" method="post" enctype="multipart/form-data">
            <!-- Customer details -->
            <div class="columns is-multiline">
              <div class="column is-6">
                <label class="label">Full name</label>
                <input class="input" type="text" name="customer_name" placeholder="Your name" required>
              </div>
              <div class="column is-6">
                <label class="label">WhatsApp number</label>
                <input class="input" type="tel" name="customer_whatsapp" placeholder="e.g. +94 77 123 4567" required>
                <p class="help">Weâ€™ll message your curated basket link here.</p>
              </div>

              <div class="column is-12">
                <label class="label">Your goal (optional)</label>
                <input class="input" type="text" name="goal" placeholder="e.g. acne care, dandruff, hydration, anti-frizz, sensitive skin">
              </div>
            </div>

            <hr style="border-color: var(--line);">

            <!-- Products -->
            <div class="is-flex is-justify-content-space-between is-align-items-center mb-3">
              <div>
                <h2 class="title is-5 mb-1" style="color:var(--text);">Add your favourite products</h2>
                <p class="fineprint">Brand + Name + Size (Images optional). Add as many as you want.</p>
              </div>

              <button type="button" id="addProductBtn" class="button btn-ghost">
                + Add product
              </button>
            </div>

            <div id="productsWrap" class="block" style="display:flex; flex-direction:column; gap:12px;">
              <!-- Product rows injected here -->
            </div>

            <hr style="border-color: var(--line);">

            <div class="columns is-vcentered">
              <div class="column is-7">
                <p class="fineprint">
                  MVP note: After we build your first basket, you can request changes anytime (swap items, sizes, add/remove products).
                </p>
              </div>
              <div class="column is-5 has-text-right">
                <button type="submit" class="button is-medium btn-gradient is-fullwidth">
                  Submit &amp; Get My Basket
                </button>
              </div>
            </div>

          </form>
        </div>
      </div>

      <p class="has-text-centered mt-4 fineprint">
        Â© Glomo.lk â€¢ Black &amp; white minimal â€¢ Logo-accent gradient
      </p>
    </div>
  </section>

  <template id="productRowTpl">
    <div class="product-block">
      <div class="product-block__head">
        <span class="tag is-dark">Product <span class="product-index"></span></span>
        <button type="button" class="button is-small btn-danger-ghost remove-btn">Remove</button>
      </div>

      <div class="columns is-multiline is-variable is-2">
        <div class="column is-4">
          <label class="label">Brand</label>
          <input class="input" type="text" name="products[IDX][brand]" placeholder="e.g. Beauty of Joseon" required>
        </div>

        <div class="column is-5">
          <label class="label">Product name</label>
          <input class="input" type="text" name="products[IDX][name]" placeholder="e.g. Relief Sun: Rice + Probiotics" required>
        </div>

        <div class="column is-3">
          <label class="label">Size</label>
          <input class="input" type="text" name="products[IDX][size]" placeholder="e.g. 50ml / 200ml" required>
        </div>

        <div class="column is-8">
          <label class="label">Image (optional)</label>
          <div class="file has-name is-fullwidth">
            <label class="file-label">
              <input class="file-input img-input" type="file" name="products[IDX][image]" accept="image/*">
              <span class="file-cta btn-ghost">
                <span class="file-icon">ðŸ“·</span>
                <span class="file-label">Choose image</span>
              </span>
              <span class="file-name">No file selected</span>
            </label>
          </div>
          <p class="help">Screenshot from your gallery is perfect.</p>
        </div>

        <div class="column is-4">
          <label class="label">Preview</label>
          <div class="thumb">Optional</div>
        </div>
      </div>
    </div>
  </template>

  <script>
    const productsWrap = document.getElementById("productsWrap");
    const addBtn = document.getElementById("addProductBtn");
    const tpl = document.getElementById("productRowTpl");

    // Add 1 default row
    addProductRow();

    addBtn.addEventListener("click", () => addProductRow());

    function addProductRow() {
      const idx = productsWrap.children.length;
      const node = tpl.content.cloneNode(true);

      // Set index label + input names
      const block = node.querySelector(".product-block");
      block.querySelector(".product-index").textContent = (idx + 1);

      // Replace IDX in all name attributes
      block.querySelectorAll("[name]").forEach(el => {
        el.name = el.name.replaceAll("IDX", idx);
      });

      // Remove handler
      block.querySelector(".remove-btn").addEventListener("click", () => {
        block.remove();
        reindexRows();
      });

      // Image preview handler
      const imgInput = block.querySelector(".img-input");
      const fileNameEl = block.querySelector(".file-name");
      const thumb = block.querySelector(".thumb");

      imgInput.addEventListener("change", (e) => {
        const file = e.target.files && e.target.files[0];
        fileNameEl.textContent = file ? file.name : "No file selected";

        if (!file) {
          thumb.innerHTML = "Optional";
          return;
        }

        const url = URL.createObjectURL(file);
        thumb.innerHTML = `<img src="${url}" alt="Product image preview">`;
      });

      productsWrap.appendChild(node);
    }

    function reindexRows() {
      [...productsWrap.children].forEach((block, newIdx) => {
        block.querySelector(".product-index").textContent = (newIdx + 1);
        block.querySelectorAll("[name]").forEach(el => {
          // Convert products[old][x] -> products[new][x]
          el.name = el.name.replace(/products\\[\\d+\\]/, `products[${newIdx}]`);
        });
      });
    }

    // Optional: handle submit (for MVP you can POST to your backend / form service)
    document.getElementById("earlybirdForm").addEventListener("submit", (e) => {
      e.preventDefault();

      // Quick MVP: show a nice confirmation
      // Replace this with: fetch('/api/earlybird', {method:'POST', body:new FormData(e.target)})
      alert("Thanks! We received your favourites. Weâ€™ll WhatsApp you your curated basket link soon.");
      e.target.reset();

      // reset UI to 1 row
      productsWrap.innerHTML = "";
      addProductRow();
    });
  </script>
</body>
</html>
